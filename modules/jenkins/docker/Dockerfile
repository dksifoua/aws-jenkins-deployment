FROM jenkins/jenkins:lts-jdk17
LABEL authors="Dimitri Sifoua"
LABEL repository="dksifoua"
LABEL description="Jenkins CI/CD Server"
LABEL version="1.0.2"

ARG JCASC_FILE
ARG JENKINS_ADMIN_USER
ARG JENKINS_ADMIN_NAME
ARG JENKINS_ADMIN_DESC
ARG JENKINS_ADMIN_PASS
ARG JENKINS_ADMIN_EMAIL

ENV JENKINS_ADMIN_USER $JENKINS_ADMIN_USER
ENV JENKINS_ADMIN_NAME $JENKINS_ADMIN_NAME
ENV JENKINS_ADMIN_DESC $JENKINS_ADMIN_DESC
ENV JENKINS_ADMIN_PASS $JENKINS_ADMIN_PASS
ENV JENKINS_ADMIN_EMAIL $JENKINS_ADMIN_EMAIL

USER jenkins
COPY ${JCASC_FILE} $JENKINS_HOME/jenkins.yaml